<!DOCTYPE html>
<html>
<head>
	<title>Chat</title>
	<script type="text/javascript" src="zepto.min.js"></script>
	<script type="text/javascript" src="websockets.js"></script>
	<script>
		Zepto(function($) {
			var socket = websocket('ws://192.168.1.1:81', 'chat');

			socket.error(function(error){
				console.log('websocket error:'+error);
			});

			socket.ready(function(){
				console.log('websocket ready!');
			});

			socket.on('message', function(message){
				$('#messages').append(message+'<br>');
			});

			$('.send').click(function(){
				socket.send('message', $('.chat').val());
			});
		});
	</script>
</head>
<body>
	<h1>Chat</h1>
	<span>Logged in as </span><strong id="username">{{username}}</strong>
	<input type="text" class="chat"><span class="send">send</span>
	<div id="messages"></div>
</body>
</html>
