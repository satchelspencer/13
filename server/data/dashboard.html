<!DOCTYPE html>
<html>
<head>
	<title>Dashboard</title>
	<script type="text/javascript" src="zepto.min.js"></script>
	<script>
		Zepto(function($) {
			$.ajax({
				type: 'GET',
				url: '/api/whoami',
				success: function(data, status, xhr) {
					if (data.success) {
						$('#username').text(data.username);
					} else {
						alert('Server error');
					}
				},
				error: function(xhr, errorType, error) {
					alert('Server error');
				}
			});
			$('#logout_button').on('click', function(e) {
				$.ajax({
					type: 'GET',
					url: '/api/logout',
					dataType: 'json',
					success: function(data, status, xhr) {
						window.location.replace("login.html");
					},
					error: function(xhr, errorType, error) {
						alert('Server error');
					}
				});
			});
		});
	</script>
</head>
<body>
	<h1>Dashboard</h1>
	<span>Logged in as </span><strong id="username"></strong>
	<button type="button" id="logout_button">Log out</button><br><br>
	<a href="chat.html">Chat</a>
</body>
</html>
